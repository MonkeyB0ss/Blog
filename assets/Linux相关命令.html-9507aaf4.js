import{_ as e,X as i,Y as t,a2 as p}from"./framework-a20dc394.js";const s="/Blog/assets/img-aeef429e.png",n="/Blog/assets/img_1-a2009a94.png",a="/Blog/assets/img_2-e6df4108.png",g="data:image/png;base64,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",l="data:image/png;base64,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",d="/Blog/assets/img_5-cef512b7.png",r="/Blog/assets/img_6-7fc81ea4.png",m="/Blog/assets/img_7-635ef9fd.png",h="/Blog/assets/img_8-892a0a18.png",o="/Blog/assets/img_9-c31ef528.png",C={},c=p('<h1 id="linux诊断原因" tabindex="-1"><a class="header-anchor" href="#linux诊断原因" aria-hidden="true">#</a> Linux诊断原因</h1><h2 id="命令集合" tabindex="-1"><a class="header-anchor" href="#命令集合" aria-hidden="true">#</a> 命令集合</h2><h3 id="整机-top-查看整机系统新能" tabindex="-1"><a class="header-anchor" href="#整机-top-查看整机系统新能" aria-hidden="true">#</a> 整机：top，查看整机系统新能</h3><p><img src="'+s+'" alt="img.png"></p><p>使用top命令的话，重点关注的是 %CPU、%MEM 、load average 三个指标</p><ul><li>load average三个指标：分别代表1、5、15分钟的负载情况</li></ul><p>在这个命令下，按1的话，可以看到每个CPU的占用情况</p><p>uptime：系统性能命令的精简版</p><h3 id="cpu-vmstat" tabindex="-1"><a class="header-anchor" href="#cpu-vmstat" aria-hidden="true">#</a> CPU：vmstat</h3><ul><li>查看CPU（包含但是不限于）</li><li>查看额外 <ul><li>查看所有CPU核信息：mpstat -p ALL 2</li><li>每个进程使用CPU的用量分解信息：pidstat -u 1 -p 进程编号</li></ul></li></ul><p>命令格式：<code>vmstat -n 2 3</code></p><p><img src="'+n+'" alt="img_1.png"></p><p>一般vmstat工具的使用是通过两个数字参数来完成的，第一个参数是残阳的时间间隔数（单位秒），第二个参数是采样的次数</p><p><strong>procs</strong></p><p>r：运行和等待的CPU时间片的进程数，原则上1核的CPU的运行队列不要超过2，整个系统的运行队列不超过总核数的2倍，否则代表系统压力过大，我们看蘑菇博客测试服务器，能发现都超过了2，说明现在压力过大</p><p>b：等待资源的进程数，比如正在等待磁盘I/O、网络I/O等</p><p><strong>cpu</strong></p><p>us：用户进程消耗CPU时间百分比，us值高，用户进程消耗CPU时间多，如果长期大于50%，优化程序</p><p>sy：内核进程消耗的CPU时间百分比</p><p><img src="'+a+'" alt="img_2.png"></p><p>us + sy 参考值为80%，如果us + sy 大于80%，说明可能存在CPU不足，从上面的图片可以看出，us + sy还没有超过百分80，因此说明蘑菇博客的CPU消耗不是很高</p><p>id：处于空闲的CPU百分比</p><p>wa：系统等待IO的CPU时间百分比</p><p>st：来自于一个虚拟机偷取的CPU时间比</p><h3 id="内存-free" tabindex="-1"><a class="header-anchor" href="#内存-free" aria-hidden="true">#</a> 内存：free</h3><ul><li><p>应用程序可用内存数：free -m</p></li><li><p>应用程序可用内存/系统物理内存 &gt; 70% 内存充足</p></li><li><p>应用程序可用内存/系统物理内存 &lt; 20% 内存不足，需要增加内存</p></li><li><p>20% &lt; 应用程序可用内存/系统物理内存 &lt; 70%，表示内存基本够用</p></li></ul><p>free -h：以人类能看懂的方式查看物理内存</p><p><img src="'+g+'" alt="img_3.png"></p><p>free -m：以MB为单位，查看物理内存</p><p><img src="'+l+'" alt="img_4.png"></p><p>free -g：以GB为单位，查看物理内存</p><h3 id="硬盘-df" tabindex="-1"><a class="header-anchor" href="#硬盘-df" aria-hidden="true">#</a> 硬盘：df</h3><p>格式：<code>df -h /</code> (-h：human，表示以人类能看到的方式换算)</p><p><img src="'+d+'" alt="img_5.png"></p><ul><li>硬盘IO：iostat</li></ul><p>系统慢有两种原因引起的，一个是CPU高，一个是大量IO操作</p><p>格式：<code>iostat -xdk 2 3</code></p><p><img src="'+r+'" alt="img_6.png"></p><p>磁盘块设备分布：</p><p>rkB/s：每秒读取数据量kB；</p><p>wkB/s：每秒写入数据量kB；</p><p>svctm I/O：请求的平均服务时间，单位毫秒</p><p>await I/O：请求的平均等待时间，单位毫秒，值越小，性能越好</p><p>util：一秒钟有百分几的时间用于I/O操作。接近100%时，表示磁盘带宽跑满，需要优化程序或者增加磁盘；</p><p>rkB/s，wkB/s根据系统应用不同会有不同的值，但有规律遵循：长期、超大数据读写，肯定不正常，需要优化程序读取。</p><p>svctm的值与await的值很接近，表示几乎没有I/O等待，磁盘性能好，如果await的值远高于svctm的值，则表示I/O队列等待太长，需要优化程序或更换更快磁盘</p><h3 id="网络io-ifstat" tabindex="-1"><a class="header-anchor" href="#网络io-ifstat" aria-hidden="true">#</a> 网络IO：ifstat</h3><ul><li>默认本地没有，下载ifstat</li></ul><p><img src="'+m+'" alt="img_7.png"></p><h2 id="生产环境服务器变慢-诊断思路和性能评估" tabindex="-1"><a class="header-anchor" href="#生产环境服务器变慢-诊断思路和性能评估" aria-hidden="true">#</a> 生产环境服务器变慢，诊断思路和性能评估</h2><p>记一次印象深刻的故障？</p><p>结合Linux 和 JDK命令一起分析，步骤如下</p><ul><li><p>使用top命令找出CPU占比最高的</p></li><li><p>ps -ef 或者 jps 进一步定位，得知是一个怎么样的后台程序出的问题</p></li><li><p>定位到具体线程或者代码</p><ul><li>ps -mp 进程 -o THREAD，tid，time</li><li>参数解释 <ul><li>-m：显示所有的线程</li><li>-p：pid进程使用CPU的时间</li><li>-o：该参数后是用户自定义格式</li></ul></li></ul><p><img src="'+h+'" alt="img_8.png"></p></li><li><p>将需要的线程ID转换为16进制格式（英文小写格式）</p><ul><li>printf “%x\\n” 有问题的线程ID</li></ul></li><li><p>jstack 进程ID | grep tid（16进制线程ID小写英文） -A60</p><p>精准定位到错误的地方</p></li></ul><p><img src="'+o+'" alt="img_9.png"></p>',54),I=[c];function v(f,u){return i(),t("div",null,I)}const E=e(C,[["render",v],["__file","Linux相关命令.html.vue"]]);export{E as default};
