---
date: 2022-12-01
category: åŸºç¡€è¿›é˜¶
tag:

- JAVA

---

# Mapæ¥å£

## å¸¸ç”¨å®ç°ç±»ç»“æ„

```text
|----Map:åŒåˆ—æ•°æ®ï¼Œå­˜å‚¨key-valueå¯¹çš„æ•°æ®   ---ç±»ä¼¼äºé«˜ä¸­çš„å‡½æ•°ï¼šy = f(x)
	|----HashMap:ä½œä¸ºMapçš„ä¸»è¦å®ç°ç±»ï¼›çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ•ˆç‡é«˜ï¼›å­˜å‚¨nullçš„keyå’Œvalue
		|----LinkedHashMap:ä¿è¯åœ¨éå†mapå…ƒç´ æ—¶ï¼Œå¯ä»¥ç…§æ·»åŠ çš„é¡ºåºå®ç°éå†ã€‚
			åŸå› ï¼šåœ¨åŸçš„HashMapåº•å±‚ç»“æ„åŸºç¡€ä¸Šï¼Œæ·»åŠ äº†ä¸€å¯¹æŒ‡é’ˆï¼ŒæŒ‡å‘å‰ä¸€ä¸ªå’Œåä¸€ä¸ªå…ƒç´ ã€‚
			å¯¹äºé¢‘ç¹çš„éå†æ“ä½œï¼Œæ­¤ç±»æ‰§è¡Œæ•ˆç‡é«˜äºHashMapã€‚
	|----TreeMap:ä¿è¯ç…§æ·»åŠ çš„key-valueå¯¹è¿›è¡Œæ’åºï¼Œå®ç°æ’åºéå†ã€‚æ­¤æ—¶è€ƒè™‘keyçš„è‡ªç„¶æ’åºæˆ–å®šåˆ¶æ’åº
			åº•å±‚ä½¿ç”¨çº¢é»‘æ ‘
	|----Hashtable:ä½œä¸ºå¤è€çš„å®ç°ç±»ï¼›çº¿ç¨‹å®‰å…¨çš„ï¼Œæ•ˆç‡ä½ï¼›ä¸èƒ½å­˜å‚¨nullçš„keyå’Œvalue
		|----Properties:å¸¸ç”¨æ¥å¤„ç†é…ç½®æ–‡ä»¶ã€‚keyå’Œvalueéƒ½æ˜¯Stringç±»å‹
```

::: tip HashMapçš„åº•å±‚
æ•°ç»„+é“¾è¡¨ï¼ˆjdk7åŠä¹‹å‰)

æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ ï¼ˆjdk 8)
:::

## å­˜å‚¨ç»“æ„çš„ç†è§£

1. Mapä¸­çš„key:æ— åºçš„ã€ä¸å¯é‡å¤çš„ï¼Œä½¿ç”¨Setå­˜å‚¨æ‰€çš„key ---> keyæ‰€åœ¨çš„ç±»è¦é‡å†™equals()å’ŒhashCode() ï¼ˆä»¥HashMapä¸ºä¾‹)
2. Mapä¸­çš„value:æ— åºçš„ã€å¯é‡å¤çš„ï¼Œä½¿ç”¨Collectionå­˜å‚¨æ‰€çš„value --->valueæ‰€åœ¨çš„ç±»è¦é‡å†™equals()
3. ä¸€ä¸ªé”®å€¼å¯¹ï¼škey-valueæ„æˆäº†ä¸€ä¸ªEntryå¯¹è±¡ã€‚
4. Mapä¸­çš„entry:æ— åºçš„ã€ä¸å¯é‡å¤çš„ï¼Œä½¿ç”¨Setå­˜å‚¨æ‰€çš„entry

å›¾ç¤ºï¼š

![img.png](../images/map.png)

## å¸¸ç”¨æ–¹æ³•

```java
æ·»åŠ ï¼šput(Object key,Object value)
åˆ é™¤ï¼šremove(Object key)
ä¿®æ”¹ï¼šput(Object key,Object value)
æŸ¥è¯¢ï¼šget(Object key)
é•¿åº¦ï¼šsize()
éå†ï¼škeySet() / values() / entrySet()
```

## å†…å­˜ç»“æ„è¯´æ˜ğŸ””

### HashMapåœ¨jdk7ä¸­å®ç°åŸç†

HashMap map = new HashMap()

1. åœ¨å®ä¾‹åŒ–ä»¥åï¼Œåº•å±‚åˆ›å»ºäº†é•¿åº¦æ˜¯16çš„ä¸€ç»´æ•°ç»„Entry[] tableã€‚
2. ...å¯èƒ½å·²ç»æ‰§è¡Œè¿‡å¤šæ¬¡put...
3. map.put(key1,value1):
	- é¦–å…ˆï¼Œè°ƒç”¨key1æ‰€åœ¨ç±»çš„hashCode()è®¡ç®—key1å“ˆå¸Œå€¼ï¼Œæ­¤å“ˆå¸Œå€¼ç»è¿‡æŸç§ç®—æ³•è®¡ç®—ä»¥åï¼Œå¾—åˆ°åœ¨Entryæ•°ç»„ä¸­çš„å­˜æ”¾ä½ç½®ã€‚
	- å¦‚æœæ­¤ä½ç½®ä¸Šçš„æ•°æ®ä¸ºç©ºï¼Œæ­¤æ—¶çš„key1-value1æ·»åŠ æˆåŠŸã€‚ ----æƒ…å†µ1
	- å¦‚æœæ­¤ä½ç½®ä¸Šçš„æ•°æ®ä¸ä¸ºç©ºï¼Œ(æ„å‘³ç€æ­¤ä½ç½®ä¸Šå­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®(ä»¥é“¾è¡¨å½¢å¼å­˜åœ¨)),æ¯”è¾ƒkey1å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®çš„å“ˆå¸Œå€¼ï¼š
		- å¦‚æœkey1çš„å“ˆå¸Œå€¼ä¸å·²ç»å­˜åœ¨çš„æ•°æ®çš„å“ˆå¸Œå€¼éƒ½ä¸ç›¸åŒï¼Œæ­¤æ—¶key1-value1æ·»åŠ æˆåŠŸã€‚----æƒ…å†µ2
		- å¦‚æœkey1çš„å“ˆå¸Œå€¼å’Œå·²ç»å­˜åœ¨çš„æŸä¸€ä¸ªæ•°æ®(key2-value2)çš„å“ˆå¸Œå€¼ç›¸åŒï¼Œç»§ç»­æ¯”è¾ƒï¼šè°ƒç”¨key1æ‰€åœ¨ç±»çš„equals(key2)æ–¹æ³•ï¼Œæ¯”è¾ƒï¼š
			- å¦‚æœequals()è¿”å›false:æ­¤æ—¶key1-value1æ·»åŠ æˆåŠŸã€‚----æƒ…å†µ3
			- å¦‚æœequals()è¿”å›true:ä½¿ç”¨value1æ›¿æ¢value2ã€‚

::: info è¡¥å……
å…³äºæƒ…å†µ2å’Œæƒ…å†µ3ï¼šæ­¤æ—¶key1-value1å’ŒåŸæ¥çš„æ•°æ®ä»¥é“¾è¡¨çš„æ–¹å¼å­˜å‚¨ã€‚
:::
::: tip
åœ¨ä¸æ–­çš„æ·»åŠ è¿‡ç¨‹ä¸­ï¼Œä¼šæ¶‰åŠåˆ°æ‰©å®¹é—®é¢˜ï¼Œå½“è¶…å‡ºä¸´ç•Œå€¼(ä¸”è¦å­˜æ”¾çš„ä½ç½®éç©º)æ—¶ï¼Œæ‰©å®¹ã€‚é»˜è®¤çš„æ‰©å®¹æ–¹å¼ï¼šæ‰©å®¹ä¸ºåŸæ¥å®¹é‡çš„2å€ï¼Œå¹¶å°†åŸçš„æ•°æ®å¤åˆ¶è¿‡æ¥ã€‚
:::

### HashMapåœ¨jdk8ä¸­ç›¸è¾ƒäºjdk7åœ¨åº•å±‚å®ç°æ–¹é¢çš„ä¸åŒ

1. new HashMap():åº•å±‚æ²¡åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º16çš„æ•°ç»„
2. jdk 8åº•å±‚çš„æ•°ç»„æ˜¯ï¼šNode[],è€ŒéEntry[]
3. é¦–æ¬¡è°ƒç”¨put()æ–¹æ³•æ—¶ï¼Œåº•å±‚åˆ›å»ºé•¿åº¦ä¸º16çš„æ•°ç»„
4. jdk7åº•å±‚ç»“æ„åªï¼šæ•°ç»„+é“¾è¡¨ã€‚jdk8ä¸­åº•å±‚ç»“æ„ï¼šæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ã€‚
	- å½¢æˆé“¾è¡¨æ—¶ï¼Œä¸ƒä¸Šå…«ä¸‹ï¼ˆjdk7:æ–°çš„å…ƒç´ æŒ‡å‘æ—§çš„å…ƒç´ ã€‚jdk8ï¼šæ—§çš„å…ƒç´ æŒ‡å‘æ–°çš„å…ƒç´ ï¼‰
	- å½“æ•°ç»„çš„æŸä¸€ä¸ªç´¢å¼•ä½ç½®ä¸Šçš„å…ƒç´ ä»¥é“¾è¡¨å½¢å¼å­˜åœ¨çš„æ•°æ®ä¸ªæ•° > 8 ä¸”å½“å‰æ•°ç»„çš„é•¿åº¦ > 64æ—¶ï¼Œæ­¤æ—¶æ­¤ç´¢å¼•ä½ç½®ä¸Šçš„æ‰€æ•°æ®æ”¹ä¸ºä½¿ç”¨çº¢é»‘æ ‘å­˜å‚¨ã€‚

### HashMapåº•å±‚å…¸å‹å±æ€§çš„å±æ€§çš„è¯´æ˜

```java
DEFAULT_INITIAL_CAPACITY : HashMapçš„é»˜è®¤å®¹é‡ï¼Œ16
DEFAULT_LOAD_FACTORï¼šHashMapçš„é»˜è®¤åŠ è½½å› å­ï¼š0.75
thresholdï¼šæ‰©å®¹çš„ä¸´ç•Œå€¼ï¼Œ=å®¹é‡å¡«å……å› å­ï¼š16*0.75 => 12
TREEIFY_THRESHOLDï¼šBucketä¸­é“¾è¡¨é•¿åº¦å¤§äºè¯¥é»˜è®¤å€¼ï¼Œè½¬åŒ–ä¸ºçº¢é»‘æ ‘:8
MIN_TREEIFY_CAPACITYï¼šæ¡¶ä¸­çš„Nodeè¢«æ ‘åŒ–æ—¶æœ€å°çš„hashè¡¨å®¹é‡:64
```

### LinkedHashMapçš„åº•å±‚å®ç°åŸç†(äº†è§£)

LinkedHashMapåº•å±‚ä½¿ç”¨çš„ç»“æ„ä¸HashMapç›¸åŒï¼Œå› ä¸ºLinkedHashMapç»§æ‰¿äºHashMap.
::: tip åŒºåˆ«å°±åœ¨äº
LinkedHashMapå†…éƒ¨æä¾›äº†Entryï¼Œæ›¿æ¢HashMapä¸­çš„Node.
:::

## TreeMapçš„ä½¿ç”¨

å‘TreeMapä¸­æ·»åŠ key-valueï¼Œè¦æ±‚keyå¿…é¡»æ˜¯ç”±åŒä¸€ä¸ªç±»åˆ›å»ºçš„å¯¹è±¡

**å› ä¸ºè¦å¯¹keyè¿›è¡Œæ’åºï¼šè‡ªç„¶æ’åº ã€å®šåˆ¶æ’åº**

## ä½¿ç”¨Propertiesè¯»å–é…ç½®æ–‡ä»¶

`Properties`:å¸¸ç”¨æ¥å¤„ç†é…ç½®æ–‡ä»¶ã€‚keyå’Œvalueéƒ½æ˜¯Stringç±»å‹

```java
public static void main(String[] args)  {
	FileInputStream fis = null;
	try {
		Properties pros = new Properties();
		
		fis = new FileInputStream("jdbc.properties");
		pros.load(fis);//åŠ è½½æµå¯¹åº”çš„æ–‡ä»¶
		
		String name = pros.getProperty("name");
		String password = pros.getProperty("password");
		
		System.out.println("name = " + name + ", password = " + password);
	} catch (IOException e) {
		e.printStackTrace();
	} finally {
		if(fis != null){
			try {
				fis.close();
			} catch (IOException e) {
				e.printStackTrace();
			}
		}
	}
}
```

